<!DOCTYPE html>
<html lang="en">
  
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
      360Hub:
      <!-- Title -->
    </title>
    <link rel="icon" href="https://homies-theta.vercel.app/logo.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
    rel="stylesheet">
    <link rel="stylesheet" href="https://bootswatch.com/5/<!-- Theme -->/bootstrap.min.css">
    <!-- VIDEO.JS -->
    <link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet">
    <style>
      body { margin:0 } .video-player { max-width:48%; margin:auto; } .video-js
      { width:100%; border-radius:6px; } .card { max-width:48%; margin:auto;
      } .container { gap:10px } @media(max-width:992px){ .video-player,.card{max-width:90%}
      }
    </style>
  </head>
  
  <body>
    <nav class="navbar navbar-dark bg-primary p-1">
      <div class="container-fluid">
        <a class="navbar-brand" href="/">
          <img src="https://homies-theta.vercel.app/logo.png" height="40">
        </a>
      </div>
    </nav>
    <!-- PLAYER -->
    <div class="video-player">
      <video id="player" class="video-js vjs-big-play-centered" controls playsinline
      poster="<!-- Poster -->">
      </video>
    </div>
    <div class="card bg-light mt-2">
      <div class="card-body">
        <h5>
          ğŸ¬ Name:
          <!-- Title -->
        </h5>
        <p>
          ğŸŒ Language: Multi-Language
        </p>
        <p>
          ğŸ“º Quality: 720p / 480p
        </p>
        <p>
          â± Duration:
          <!-- Duration -->
        </p>
        <p>
          ğŸ’¾ Size:
          <!-- Size -->
        </p>
        <p>
          ğŸ“ Format:
          <!-- Tag -->
        </p>
      </div>
    </div>
    <div class="container d-flex justify-content-center mt-2">
      <div class="btn btn-primary" onclick="mx_player()">
        MX Player
      </div>
      <div class="btn btn-primary" onclick="vlc_player()">
        VLC
      </div>
      <div class="btn btn-primary" onclick="km_player()">
        KM Player
      </div>
      <div class="btn btn-primary" onclick="copyUrl()">
        Copy URL
      </div>
      <div class="btn btn-primary" onclick="download()">
        Download
      </div>
    </div>
    <footer class="text-center mt-3">
      Â© 2025
      <a href="https://360hub.fun">
        360Hub
      </a>
    </footer>
    <!-- VIDEO.JS -->
    <script src="https://vjs.zencdn.net/8.10.0/video.min.js">
    </script>
    <script>
      /* ================= URL ================= */
      const videolink = location.href;
      const url = new URL(videolink);
      const domainUrl = url.origin;
      const videoId = videolink.split('/').pop().split('?')[0];
      const idParam = url.searchParams.get('id');
      const hashParam = url.searchParams.get('hash');
      const encodedName = encodeURIComponent('<!-- Filename -->');

      const downloadlink = `$ {
        domainUrl
      }
      /${videoId}/$ {
        encodedName
      } ? id = $ {
        idParam
      } & hash = $ {
        hashParam
      }`;
      const rawDomain = domainUrl.replace(/^https?:\/\//, '');
      const downloadlink1 = `$ {
        rawDomain
      }
      /${videoId}/$ {
        encodedName
      } ? id = $ {
        idParam
      } & hash = $ {
        hashParam
      }`;

      /* ================= PLAYER ================= */
      const player = videojs('player', {
        techOrder: ['html5'],
        controls: true,
        fluid: true,
        preload: 'none',
        playbackRates: [0.5, 1, 1.25, 1.5, 2],
        controlBar: {
          skipButtons: {
            forward: 10,
            backward: 10
          }
        },
        html5: {
          overrideNative: false,
          nativeAudioTracks: true,
          nativeTextTracks: true
        }
      });

      /* SET SOURCE AFTER READY (CRITICAL FIX) */
      player.ready(() = >{
        player.src({
          src: downloadlink,
          type: 'video/mp4'
        });
      });

      /* ================= YOUTUBE-STYLE DOUBLE TAP ================= */
      player.el().addEventListener('dblclick', e = >{
        const rect = player.el().getBoundingClientRect();
        const x = e.clientX - rect.left;
        const half = rect.width / 2;
        const t = player.currentTime();
        player.currentTime(x < half ? Math.max(0, t - 10) : Math.min(player.duration(), t + 10));
      });

      /* ================= AUDIO + SUBS AUTO ================= */
      player.on('loadedmetadata', () = >{
        const a = player.audioTracks();
        if (a && a.length > 0) a[0].enabled = true;

        const s = player.textTracks();
        for (let i = 0; i < s.length; i++) {
          if (s[i].kind === 'subtitles') {
            s[i].mode = 'showing';
            break;
          }
        }
      });

      /* ================= EXTERNAL ================= */
      function mx_player() {
        location.href = `intent: $ {
          downloadlink1
        }#Intent;
        package = com.mxtech.videoplayer.ad;
        end`
      }
      function vlc_player() {
        location.href = `vlc: //${downloadlink1}`}
        function km_player() {
          location.href = `intent: $ {
            downloadlink1
          }#Intent;
          package = com.kmplayer;
          end`
        }
        function download() {
          location.href = downloadlink
        }
        function copyUrl() {
          navigator.clipboard.writeText(downloadlink);
          alert('Copied')
        }
    </script>
  </body>

</html>
